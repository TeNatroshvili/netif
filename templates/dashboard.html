{% extends "base.html" %}

{% block title %}Dashboard{% endblock title %}

{% block links %}
<link rel="stylesheet" href="{{url_for('static', filename='css/dashboard.css')}}">
{% endblock links %}

{% block scripts %}
<script src="{{url_for('static', filename='js/dashboard.js')}}"></script>
<script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
{% endblock scripts %}

{% block content %}
<div class="reload-switch">
    <span>Reload Switches</span>
    <img id="refreshbutton" class="refresh icon-button" src="{{url_for('static', filename='images/arrows-rotate.svg')}}"
        alt="refresh" onclick="loadSwitches()">
</div>
<div class="change-pw">
    <span>Change Management Password</span>
    <img id="changepw" class="changepw icon-button" src="{{url_for('static', filename='images/gear.svg')}}"
        alt="changepw" onclick="changePassword()">
</div>
<div class="switch-list">
    {% for item in switches %}
    <div class="switch-list-item">
        <img class="gear-icon modal-toggle icon-button" onclick="openSettings('{{item.ip}}')"
            src="{{url_for('static', filename='images/gear.svg')}}">
        <div class="name-text">
            <p style="font-weight: bold; font-size: 1.2em;">{{ item.name }}</p>
            <p style="font-size: 1em;">{{ item.model }}</p>
            <p style="font-size: 1em;">{{ item.ip }}</p>
        </div>
    </div>
    {% endfor %}
</div>
<div class="latest-reports">Latest Reports</div>
<div class="report-list">
    {% for n in range(5) %}
    {% set report = reports[n] %}

    <div class="report-list-item">
        {{ report }}
        <a href="/download/{{report}}"><img class="download icon-button" style="width:1.2em"
                src="{{url_for('static', filename='images/download.svg')}}" alt="download"
                onclick="download_report('{{report}}')"></a>
    </div>
    {% endfor %}
    <div class="more-reports"><a href="/reports"><span>All Reports</span></a></div>
</div>
<div class="performance-diagram">
    <img src="{{url_for('static', filename='images/gauge.svg')}}" style="width:60%" alt="gauge.svg">
</div>
{% endblock content %}

{% block modal %}
<div id="myModal" class="modal">
    <div class="modal-load"></div>
    <!-- Modal content -->
    <div class="modal-content">
        <span class="close" onclick="closeSettings('myModal')">&times;</span>
        <form action="/conf/save_system_settings" method="post">
            Systemname: <input type="text" id="systemname" name="systemname"><br>
            IPv4 Adress: <input type="text" id="ipadress" name="ipadress"><br>
            Subnetmask: <input type="text" id="subnetmask" name="subnetmask"><br>
            Gatewayadress: <input type="text" id="gatewayadress" name="gatewayadress"><br>
            MAC Adress: <span id="macadress"></span><br>
            SNMP: <input type="radio" name="snmp" id="snmpOn" value="enabled" selected> enabled
            <input type="radio" name="snmp" id="snmpOff" value="disabled"> disabled<br>
            <input type="submit" value="Save">
        </form>
    </div>
</div>
<div id="myModal2" class="modal">
    <div class="modal-load"></div>
    <!-- Modal content -->
    <div class="modal-content">
        <span class="close" onclick="closeSettings('myModal2')">&times;</span>
        <form action="/changePassword" method="post">
            username: <input type="text" id="username" name="username" readonly><br>
            password: <input type="password" id="password" name="password" required><br>
            new password: <input type="password" id="newpass" name="newpass" required><br>
            <input type="submit" value="Save">
        </form>

    </div>
</div>
{% endblock modal %}